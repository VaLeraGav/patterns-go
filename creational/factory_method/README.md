# Фабричный метод (FactoryMethod)

Паттерн `Factory Method` относится к порождающим паттернам уровня класса и сфокусирован только на отношениях между классами.

> В Go невозможно реализовать классический вариант паттерна Фабричный метод, поскольу в языке отсутствуют возможности ООП, в том числе классы и наследственность. Несмотря на это, мы все же можем реализовать базовую версию этого паттерна — `Простая фабрика`.

Паттерн `Factory Method` полезен, когда система должна оставаться легко расширяемой путем добавления объектов новых типов. Этот паттерн является основой для всех порождающих паттернов и может легко трансформироваться под нужды системы. По этому, если перед разработчиком стоят не четкие требования для продукта или не ясен способ организации взаимодействия между продуктами, то для начала можно воспользоваться паттерном `Factory Method`, пока полностью не сформируются все требования.

Паттерн `Factory Method` применяется для создания объектов с определенным интерфейсом, реализации которого предоставляются потомками. Другими словами, есть базовый абстрактный класс фабрики, который говорит, что каждая его наследующая фабрика должна реализовать такой-то метод для создания своих продуктов.

> `Factory Method` отличается от `Abstract Factory`, тем, что `Abstract Factory` производит семейство объектов, эти объекты разные, обладают разными интерфейсами, но взаимодействуют между собой. В то время как `Factory Method` производит продукты придерживающиеся одного интерфейса и эти продукты не связаны между собой, не вступают во взаимодействие.

- Базовый абстрактный класс `Creator`, описывающий интерфейс, который должна реализовать конкретная фабрика для производства продуктов. Этот базовый класс описывает фабричный метод.

```go
type Creator interface {
	CreateProduct(action action) Product // Factory Method
}
```

- Базовый класс `Product`, описывающий интерфейс продукта, который возвращает фабрика. Все продукты возвращаемые фабрикой должны придерживаться единого интерфейса.

```go
type Product interface {
	Use() string
}
```

- Класс конкретной фабрики по производству продуктов `ConcreteCreator`. Этот класс должен реализовать фабричный метод

```go
type ConcreteCreator struct {}


func NewCreator() Creator {
	return &ConcreteCreator{}
}

func (p *ConcreteCreator) CreateProduct(action action) Product {
	var product Product

	switch action {
	case A:
		product = &ConcreteProductA{string(action)}
	case B:
		product = &ConcreteProductB{string(action)}
	default:
		log.Fatalln("Unknown Action")
	}

	return product
}

```

- Класс реального продукта `ConcreteProductA` и `ConcreteProductB`

```go
type ConcreteProductA struct {
	action string
}

func (p *ConcreteProductA) Use() string {
	return p.action
}
```
