# Одиночка (Singleton)

Паттерн `Singleton` относится к порождающим паттернам уровня объекта. Паттерн контролирует создание единственного экземпляра некоторого класса и предоставляет доступ к нему. Другими словами, `Singleton` гарантирует, что у класса будет только один экземпляр и предоставляет к нему точку доступа, через фабричный метод.

Одиночка имеет такие же преимущества и недостатки, что и глобальные переменные. Его невероятно удобно использовать, но он нарушает модульность вашего кода.

А что касательно потоков goroutine? Структура одиночки должна возвращать один и тот же экземпляр в случаях, когда разные потоки пытаются получить доступ к этому экземпляру. По этой причине можно легко ошибиться и неправильно реализовать паттерн Одиночка.

Функция `GetInstance`, создающая экземпляр класса `Singleton` только один раз. Если до этого экземпляр уже был создан, то просто возвращает этот экземпляр.

```go
func GetInstance() *Singleton {
	once.Do(func() {
		instance = &Singleton{}
	})
	return instance
}
```
